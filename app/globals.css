@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Base colors */
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;

  /* Primary - Purple (matching admin) */
  --primary: 262 83% 58%;
  --primary-foreground: 0 0% 100%;
  --primary-hover: 262 83% 53%;
  --primary-light: 262 50% 95%;
  --primary-dark: 262 83% 48%;

  /* Secondary - Blue */
  --secondary: 217 91% 60%;
  --secondary-foreground: 0 0% 100%;
  --secondary-hover: 217 91% 55%;
  --secondary-light: 217 91% 95%;
  --secondary-dark: 217 91% 50%;

  /* Accent - Indigo */
  --accent: 239 84% 67%;
  --accent-foreground: 0 0% 100%;
  --accent-hover: 239 84% 62%;
  --accent-light: 239 84% 95%;
  --accent-dark: 239 84% 57%;

  /* Success - Green */
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;
  --success-light: 142 71% 95%;
  --success-dark: 142 71% 35%;

  /* Warning - Amber */
  --warning: 38 92% 50%;
  --warning-foreground: 0 0% 100%;
  --warning-light: 38 92% 95%;
  --warning-dark: 38 92% 40%;

  /* Error - Red */
  --error: 0 84% 60%;
  --error-foreground: 0 0% 100%;
  --error-light: 0 84% 95%;
  --error-dark: 0 84% 50%;

  /* Neutral Grays */
  --muted: 210 40% 96%;
  --muted-foreground: 215 16% 47%;
  --muted-dark: 217 19% 27%;

  /* Borders and inputs */
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 262 83% 58%;

  /* Destructive (legacy compatibility) */
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  /* Layout */
  --radius: 0.5rem;
}

/* System dark mode preference (when no manual theme override) */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    /* Base colors - Dark theme */
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;
    --card: 224 71% 4%;
    --card-foreground: 210 40% 98%;
    --popover: 224 71% 4%;
    --popover-foreground: 210 40% 98%;

    /* Primary - Purple (brighter for dark) */
    --primary: 262 83% 68%;
    --primary-foreground: 0 0% 100%;
    --primary-hover: 262 83% 73%;
    --primary-light: 262 40% 20%;
    --primary-dark: 262 83% 58%;

    /* Secondary - Blue (brighter for dark) */
    --secondary: 217 91% 70%;
    --secondary-foreground: 0 0% 100%;
    --secondary-hover: 217 91% 75%;
    --secondary-light: 217 50% 20%;
    --secondary-dark: 217 91% 60%;

    /* Accent - Indigo (brighter for dark) */
    --accent: 239 84% 77%;
    --accent-foreground: 0 0% 100%;
    --accent-hover: 239 84% 82%;
    --accent-light: 239 50% 20%;
    --accent-dark: 239 84% 67%;

    /* Success - Green (brighter for dark) */
    --success: 142 71% 55%;
    --success-foreground: 0 0% 100%;
    --success-light: 142 40% 20%;
    --success-dark: 142 71% 45%;

    /* Warning - Amber (brighter for dark) */
    --warning: 38 92% 60%;
    --warning-foreground: 0 0% 100%;
    --warning-light: 38 50% 20%;
    --warning-dark: 38 92% 50%;

    /* Error - Red (brighter for dark) */
    --error: 0 84% 70%;
    --error-foreground: 0 0% 100%;
    --error-light: 0 40% 20%;
    --error-dark: 0 84% 60%;

    /* Neutral Grays - Dark theme */
    --muted: 217 19% 27%;
    --muted-foreground: 215 20% 65%;
    --muted-dark: 217 19% 17%;

    /* Borders and inputs - Dark theme */
    --border: 217 19% 27%;
    --input: 217 19% 27%;
    --ring: 262 83% 68%;

    /* Destructive (legacy compatibility) */
    --destructive: 0 84% 70%;
    --destructive-foreground: 0 0% 100%;
  }
}

/* Manual dark mode override - use: document.documentElement.setAttribute('data-theme', 'dark') */
[data-theme="dark"] {
  /* Base colors - Dark theme */
  --background: 222 47% 11%;
  --foreground: 210 40% 98%;
  --card: 224 71% 4%;
  --card-foreground: 210 40% 98%;
  --popover: 224 71% 4%;
  --popover-foreground: 210 40% 98%;

  /* Primary - Purple (brighter for dark) */
  --primary: 262 83% 68%;
  --primary-foreground: 0 0% 100%;
  --primary-hover: 262 83% 73%;
  --primary-light: 262 40% 20%;
  --primary-dark: 262 83% 58%;

  /* Secondary - Blue (brighter for dark) */
  --secondary: 217 91% 70%;
  --secondary-foreground: 0 0% 100%;
  --secondary-hover: 217 91% 75%;
  --secondary-light: 217 50% 20%;
  --secondary-dark: 217 91% 60%;

  /* Accent - Indigo (brighter for dark) */
  --accent: 239 84% 77%;
  --accent-foreground: 0 0% 100%;
  --accent-hover: 239 84% 82%;
  --accent-light: 239 50% 20%;
  --accent-dark: 239 84% 67%;

  /* Success - Green (brighter for dark) */
  --success: 142 71% 55%;
  --success-foreground: 0 0% 100%;
  --success-light: 142 40% 20%;
  --success-dark: 142 71% 45%;

  /* Warning - Amber (brighter for dark) */
  --warning: 38 92% 60%;
  --warning-foreground: 0 0% 100%;
  --warning-light: 38 50% 20%;
  --warning-dark: 38 92% 50%;

  /* Error - Red (brighter for dark) */
  --error: 0 84% 70%;
  --error-foreground: 0 0% 100%;
  --error-light: 0 40% 20%;
  --error-dark: 0 84% 60%;

  /* Neutral Grays - Dark theme */
  --muted: 217 19% 27%;
  --muted-foreground: 215 20% 65%;
  --muted-dark: 217 19% 17%;

  /* Borders and inputs - Dark theme */
  --border: 217 19% 27%;
  --input: 217 19% 27%;
  --ring: 262 83% 68%;

  /* Destructive (legacy compatibility) */
  --destructive: 0 84% 70%;
  --destructive-foreground: 0 0% 100%;
}

/* Manual light mode override - use: document.documentElement.setAttribute('data-theme', 'light') */
[data-theme="light"] {
  /* Base colors */
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;

  /* Primary - Purple (matching admin) */
  --primary: 262 83% 58%;
  --primary-foreground: 0 0% 100%;
  --primary-hover: 262 83% 53%;
  --primary-light: 262 50% 95%;
  --primary-dark: 262 83% 48%;

  /* Secondary - Blue */
  --secondary: 217 91% 60%;
  --secondary-foreground: 0 0% 100%;
  --secondary-hover: 217 91% 55%;
  --secondary-light: 217 91% 95%;
  --secondary-dark: 217 91% 50%;

  /* Accent - Indigo */
  --accent: 239 84% 67%;
  --accent-foreground: 0 0% 100%;
  --accent-hover: 239 84% 62%;
  --accent-light: 239 84% 95%;
  --accent-dark: 239 84% 57%;

  /* Success - Green */
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;
  --success-light: 142 71% 95%;
  --success-dark: 142 71% 35%;

  /* Warning - Amber */
  --warning: 38 92% 50%;
  --warning-foreground: 0 0% 100%;
  --warning-light: 38 92% 95%;
  --warning-dark: 38 92% 40%;

  /* Error - Red */
  --error: 0 84% 60%;
  --error-foreground: 0 0% 100%;
  --error-light: 0 84% 95%;
  --error-dark: 0 84% 50%;

  /* Neutral Grays */
  --muted: 210 40% 96%;
  --muted-foreground: 215 16% 47%;
  --muted-dark: 217 19% 27%;

  /* Borders and inputs */
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 262 83% 58%;

  /* Destructive (legacy compatibility) */
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    /* Support for light/dark color scheme */
    color-scheme: light dark;
    -webkit-color-scheme: light dark;
    /* Safe area insets for notched devices */
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Smooth theme transitions */
  * {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 200ms;
  }

  /* Prevent transitions on elements that shouldn't animate */
  *:where(:not(:has(> *))) {
    transition-property: background-color, border-color, color, fill, stroke;
  }

  /* Prevent horizontal overflow on narrow devices */
  * {
    max-width: 100%;
    overflow-wrap: break-word;
    word-wrap: break-word;
  }

  /* Ensure media elements are responsive */
  img, video, iframe, canvas {
    max-width: 100%;
    height: auto;
  }

  /* Mobile-first responsive typography */
  h1 {
    @apply text-2xl font-bold leading-tight md:text-3xl lg:text-4xl;
  }

  h2 {
    @apply text-xl font-semibold leading-tight md:text-2xl lg:text-3xl;
  }

  h3 {
    @apply text-lg font-medium leading-tight md:text-xl lg:text-2xl;
  }

  h4 {
    @apply text-base font-semibold leading-snug md:text-lg lg:text-xl;
  }

  h5 {
    @apply text-sm font-semibold leading-snug md:text-base lg:text-lg;
  }

  h6 {
    @apply text-xs font-semibold uppercase tracking-wide leading-snug md:text-sm;
  }

  p {
    @apply text-base leading-relaxed text-foreground;
  }

  small {
    @apply text-sm leading-normal text-muted-foreground;
  }

  strong {
    @apply font-semibold text-foreground;
  }

  em {
    @apply italic;
  }

  /* Link styles */
  a {
    @apply text-primary hover:text-primary-hover underline-offset-4 transition-colors;
  }

  /* Ensure minimum touch target size */
  button, input, select, textarea, a {
    @apply min-h-[44px] min-w-[44px];
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :root {
      --border: 0 0% 0%;
      --ring: 0 0% 0%;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Mobile-optimized focus styles */
  .focus-visible:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  /* Touch-friendly button styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium transition-all duration-200;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
    @apply disabled:pointer-events-none disabled:opacity-60 disabled:cursor-not-allowed;
    @apply min-h-[44px] min-w-[44px];
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground;
    @apply hover:bg-[hsl(var(--primary-hover))] active:bg-[hsl(var(--primary-dark))];
    @apply shadow-sm hover:shadow-md active:shadow-sm;
  }

  .btn-secondary {
    @apply bg-secondary text-secondary-foreground;
    @apply hover:bg-[hsl(var(--secondary-hover))] active:bg-[hsl(var(--secondary-dark))];
    @apply shadow-sm hover:shadow-md active:shadow-sm;
  }

  .btn-accent {
    @apply bg-accent text-accent-foreground;
    @apply hover:bg-[hsl(var(--accent-hover))] active:bg-[hsl(var(--accent-dark))];
    @apply shadow-sm hover:shadow-md active:shadow-sm;
  }

  .btn-success {
    @apply bg-[hsl(var(--success))] text-[hsl(var(--success-foreground))];
    @apply hover:bg-[hsl(var(--success-dark))] active:bg-[hsl(var(--success-dark))];
    @apply shadow-sm hover:shadow-md active:shadow-sm;
  }

  .btn-warning {
    @apply bg-[hsl(var(--warning))] text-[hsl(var(--warning-foreground))];
    @apply hover:bg-[hsl(var(--warning-dark))] active:bg-[hsl(var(--warning-dark))];
    @apply shadow-sm hover:shadow-md active:shadow-sm;
  }

  .btn-error {
    @apply bg-[hsl(var(--error))] text-[hsl(var(--error-foreground))];
    @apply hover:bg-[hsl(var(--error-dark))] active:bg-[hsl(var(--error-dark))];
    @apply shadow-sm hover:shadow-md active:shadow-sm;
  }

  .btn-outline {
    @apply border-2 border-primary bg-transparent text-primary;
    @apply hover:bg-primary hover:text-primary-foreground;
    @apply active:bg-[hsl(var(--primary-dark))] active:text-primary-foreground;
  }

  .btn-ghost {
    @apply bg-transparent text-primary;
    @apply hover:bg-[hsl(var(--primary-light))];
    @apply active:bg-[hsl(var(--primary-light))];
  }

  /* Mobile-optimized form styles */
  .form-input {
    @apply flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm;
    @apply ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium;
    @apply placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2;
    @apply focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
    @apply min-h-[44px] transition-all duration-200;
    @apply hover:border-[hsl(var(--primary-hover))] focus:border-primary;
  }

  /* Card component styles */
  .health-card {
    @apply bg-card rounded-lg p-6 shadow-sm border border-border;
    @apply hover:shadow-md transition-shadow duration-200;
  }

  .progress-bar {
    @apply w-full bg-[hsl(var(--muted))] rounded-full h-2 overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
  }

  .progress-bar-primary {
    @apply bg-primary;
  }

  .progress-bar-success {
    @apply bg-[hsl(var(--success))];
  }

  .progress-bar-warning {
    @apply bg-[hsl(var(--warning))];
  }

  .progress-bar-accent {
    @apply bg-accent;
  }

  /* Notification styles */
  .notification {
    @apply rounded-lg p-4 border;
  }

  .notification-success {
    @apply bg-[hsl(var(--success-light))] border-[hsl(var(--success))] text-[hsl(var(--success-dark))];
  }

  .notification-warning {
    @apply bg-[hsl(var(--warning-light))] border-[hsl(var(--warning))] text-[hsl(var(--warning-dark))];
  }

  .notification-error {
    @apply bg-[hsl(var(--error-light))] border-[hsl(var(--error))] text-[hsl(var(--error-dark))];
  }

  .notification-info {
    @apply bg-[hsl(var(--accent-light))] border-[hsl(var(--accent))] text-[hsl(var(--accent-dark))];
  }

  /* Typography utility classes */
  .text-display {
    @apply text-4xl font-bold leading-tight tracking-tight md:text-5xl lg:text-6xl;
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent;
  }

  .text-body-lg {
    @apply text-lg leading-relaxed text-foreground;
  }

  .text-body {
    @apply text-base leading-relaxed text-foreground;
  }

  .text-body-sm {
    @apply text-sm leading-normal text-foreground;
  }

  .text-caption {
    @apply text-xs leading-snug text-muted-foreground;
  }

  .text-label {
    @apply text-sm font-medium leading-none text-foreground;
  }

  .text-overline {
    @apply text-xs font-semibold uppercase tracking-widest text-muted-foreground;
  }

  .text-mono {
    @apply font-mono text-sm;
  }

  /* Page layout components */
  .page-header {
    @apply bg-background shadow-sm sticky top-0 z-40;
  }

  .page-header-content {
    @apply mx-auto max-w-7xl px-4 py-4 flex items-center justify-between gap-4;
  }

  .page-title {
    @apply text-xl font-semibold text-foreground md:text-2xl;
  }

  .page-back-button {
    @apply text-primary hover:text-primary-hover transition-colors;
  }

  /* Container utilities with safe area support */
  .container-narrow {
    @apply mx-auto max-w-2xl;
    min-width: 0;
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  .container-medium {
    @apply mx-auto max-w-4xl;
    min-width: 0;
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  .container-wide {
    @apply mx-auto max-w-7xl;
    min-width: 0;
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  /* Section utilities */
  .section {
    @apply py-8 md:py-12 lg:py-16;
  }

  .section-sm {
    @apply py-4 md:py-6 lg:py-8;
  }

  .section-lg {
    @apply py-12 md:py-16 lg:py-24;
  }

  /* Card variations */
  .card {
    @apply bg-card text-card-foreground rounded-lg border border-border shadow-sm;
  }

  .card-hover {
    @apply card hover:shadow-md hover:border-primary/50 transition-all duration-200;
  }

  .card-interactive {
    @apply card-hover cursor-pointer active:scale-[0.98];
  }

  /* Badge/Pill components */
  .badge {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium;
  }

  .badge-primary {
    @apply badge bg-primary-light text-primary-dark;
  }

  .badge-secondary {
    @apply badge bg-secondary-light text-secondary-dark;
  }

  .badge-success {
    @apply badge bg-[hsl(var(--success-light))] text-[hsl(var(--success-dark))];
  }

  .badge-warning {
    @apply badge bg-[hsl(var(--warning-light))] text-[hsl(var(--warning-dark))];
  }

  .badge-error {
    @apply badge bg-[hsl(var(--error-light))] text-[hsl(var(--error-dark))];
  }

  .badge-neutral {
    @apply badge bg-muted text-muted-foreground;
  }
}

@layer utilities {
  /* Shimmer animation for skeleton loaders */
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  .animate-shimmer {
    animation: shimmer 2s infinite linear;
  }
}